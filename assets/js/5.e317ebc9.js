(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{176:function(n,t,s){n.exports=s.p+"assets/img/cert.03677548.png"},177:function(n,t,s){n.exports=s.p+"assets/img/nginx.9626c187.png"},178:function(n,t,s){n.exports=s.p+"assets/img/https.3e5dd34b.png"},193:function(n,t,s){"use strict";s.r(t);var a={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=s(5),r=Object(e.a)(a,function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.slotKey}},[a("h1",{attrs:{id:"aliyun-服务器通过nginx-配置https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aliyun-服务器通过nginx-配置https","aria-hidden":"true"}},[n._v("#")]),n._v(" Aliyun 服务器通过nginx 配置https")]),n._v(" "),a("h2",{attrs:{id:"配置过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置过程","aria-hidden":"true"}},[n._v("#")]),n._v(" 配置过程")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("购买证书，如果要求的级别不那么高的话，可以申请Symantec的免费型DV SSL，这个是免费的。\n"),a("img",{attrs:{src:s(176),alt:"images"}})])]),n._v(" "),a("li",[a("p",[n._v("证书的申请：如实填写相关的信息，很快就可以验证完成。")])]),n._v(" "),a("li",[a("p",[n._v("证书下载：根据服务器的类型下载相关类型的证书，这里我选择的是Nginx类型的。")])]),n._v(" "),a("li",[a("p",[n._v("配置nginx：编辑nginx.conf文件，重启nginx。\n"),a("img",{attrs:{src:s(177),alt:"nginx.conf"}})])])]),n._v(" "),a("p",[n._v("docker 运行nginx的语句，请忽略这乱糟糟的路径：")]),n._v(" "),a("div",{staticClass:"language-docker line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[n._v("docker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("d \\\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("name nginx  \\\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("p 80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("80 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("p 443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("443 \\\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("v `pwd`/conf.d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/etc/nginx/conf.d \\\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("v `pwd`/nginx.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/etc/nginx/nginx.conf \\\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("v `pwd`/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/etc/nginx/html \\\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("v `pwd`/cert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("/etc/nginx/cert \\\n        nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br")])]),a("p",[n._v("查看nginx的运行状态：docker ps|grep nginx")]),n._v(" "),a("p",[n._v("5、验证：在浏览器上输入你配置的域名，然后你就可以看到一个小锁的标志\n"),a("img",{attrs:{src:s(178),alt:""}})]),n._v(" "),a("h2",{attrs:{id:"问题记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题记录","aria-hidden":"true"}},[n._v("#")]),n._v(" \b问题记录")]),n._v(" "),a("p",[n._v("为什么我配置完成之后，http请求可以正常访问，https 不能正常访问？？")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("nginx是不是没有正常监听443端口?")]),n._v(" "),a("p",[n._v("通过netstat -an 查看443端口正常监听。")])]),n._v(" "),a("li",[a("p",[n._v("nginx.conf 文件中关于证书的配置是不是有问题？别人的证书都是***.pem 和***.key 而我的是***.crt和***.key")]),n._v(" "),a("p",[n._v("通过openssl 的命令，把***.crt 转化成***.pem，上传到服务器，然后重新启动nginx，问题依然没有解决。😦 后面的事实证明这个好像没有什么关系。")])]),n._v(" "),a("li",[a("p",[n._v("是不是阿里云服务器没有打开443端口？")]),n._v(" "),a("p",[n._v("通过阿里云的控制台，查看安全组规则，果然没有配置。配置上443端口，重启nginx ，问题就解决了。")])]),n._v(" "),a("li",[a("p",[n._v("为什么我直接按照上面的docker命令，NGINX根本就运行不起来，一起来就挂了？\n因为你一开始运行的时候，你在容器外的nginx.conf 和conf.d里面是空的，导致容器内的nginx的配置文件也是空的，能跑起来就奇怪了？现在有两种方法：")]),n._v(" "),a("ul",[a("li",[n._v("从别的NGINX去抄一个配置文件过来，包括nginx.conf和conf.d；")]),n._v(" "),a("li",[n._v("先不挂载配置文件，直接让nginx 运行起来，然后使用docker cp 命令把容器内的配置文件复制出来，然后在使用挂载命令，把复制出来的配置文件，有映射到容器里面。")])])]),n._v(" "),a("li",[a("p",[n._v("一切都按照之前自己总结的步骤去操作，为什么有不能实现nginx 跳转呢？\n最后知道真相的我眼泪掉下来，我特么把域名解析给配置错了……被自己蠢哭，域名解析的IP 是外网IP。")])])]),n._v(" "),a("hr"),n._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/gxb2260/article/details/83753508",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考1：\bcsdn"),a("OutboundLink")],1)]),n._v(" "),a("li",[a("a",{attrs:{href:"https://zh-rocco.github.io/a-linux/server.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("参考2：腾讯云配置https"),a("OutboundLink")],1)])])])},[],!1,null,null,null);r.options.__file="https.md";t.default=r.exports}}]);