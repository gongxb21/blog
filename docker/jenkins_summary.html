<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jenkins 自动化中遇到的问题 | GXB</title>
    <meta name="description" content="读书笔记、踩坑记录、知识梳理">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.96e0297f.css" as="style"><link rel="preload" href="/blog/assets/js/app.7f3b1a20.js" as="script"><link rel="preload" href="/blog/assets/js/2.960483ae.js" as="script"><link rel="preload" href="/blog/assets/js/31.3c12a1d7.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.e15378f2.js"><link rel="prefetch" href="/blog/assets/js/11.d0e58c4c.js"><link rel="prefetch" href="/blog/assets/js/12.2ef206cf.js"><link rel="prefetch" href="/blog/assets/js/13.d928bd5a.js"><link rel="prefetch" href="/blog/assets/js/14.411cd931.js"><link rel="prefetch" href="/blog/assets/js/15.a649fa26.js"><link rel="prefetch" href="/blog/assets/js/16.65ccb03d.js"><link rel="prefetch" href="/blog/assets/js/17.a71c08ea.js"><link rel="prefetch" href="/blog/assets/js/18.8abdc3d7.js"><link rel="prefetch" href="/blog/assets/js/19.8e23897f.js"><link rel="prefetch" href="/blog/assets/js/20.a6fe9d52.js"><link rel="prefetch" href="/blog/assets/js/21.eaf92bb4.js"><link rel="prefetch" href="/blog/assets/js/22.350b74bb.js"><link rel="prefetch" href="/blog/assets/js/23.ceb5e7f1.js"><link rel="prefetch" href="/blog/assets/js/24.3f587313.js"><link rel="prefetch" href="/blog/assets/js/25.f8cad157.js"><link rel="prefetch" href="/blog/assets/js/26.e82555bc.js"><link rel="prefetch" href="/blog/assets/js/27.a48a326c.js"><link rel="prefetch" href="/blog/assets/js/28.04720f6b.js"><link rel="prefetch" href="/blog/assets/js/29.7b7f4f57.js"><link rel="prefetch" href="/blog/assets/js/3.af29da4e.js"><link rel="prefetch" href="/blog/assets/js/30.cb968a53.js"><link rel="prefetch" href="/blog/assets/js/32.d7fbf061.js"><link rel="prefetch" href="/blog/assets/js/33.2f0b8b6b.js"><link rel="prefetch" href="/blog/assets/js/34.510e29de.js"><link rel="prefetch" href="/blog/assets/js/35.e17aaa92.js"><link rel="prefetch" href="/blog/assets/js/36.3f841693.js"><link rel="prefetch" href="/blog/assets/js/37.b72e8e99.js"><link rel="prefetch" href="/blog/assets/js/38.a4336c35.js"><link rel="prefetch" href="/blog/assets/js/39.2a6e741f.js"><link rel="prefetch" href="/blog/assets/js/4.6369ec79.js"><link rel="prefetch" href="/blog/assets/js/40.e920973a.js"><link rel="prefetch" href="/blog/assets/js/41.1187bb1e.js"><link rel="prefetch" href="/blog/assets/js/42.46d8bc65.js"><link rel="prefetch" href="/blog/assets/js/43.c5c4322c.js"><link rel="prefetch" href="/blog/assets/js/44.c23b21f7.js"><link rel="prefetch" href="/blog/assets/js/45.f494a756.js"><link rel="prefetch" href="/blog/assets/js/46.c7836264.js"><link rel="prefetch" href="/blog/assets/js/47.c2dac787.js"><link rel="prefetch" href="/blog/assets/js/48.d89f63f0.js"><link rel="prefetch" href="/blog/assets/js/49.feae655d.js"><link rel="prefetch" href="/blog/assets/js/5.77dbd233.js"><link rel="prefetch" href="/blog/assets/js/50.4bfcf85f.js"><link rel="prefetch" href="/blog/assets/js/51.791f02eb.js"><link rel="prefetch" href="/blog/assets/js/52.734c6b8e.js"><link rel="prefetch" href="/blog/assets/js/6.ef3d7406.js"><link rel="prefetch" href="/blog/assets/js/7.9c42c5af.js"><link rel="prefetch" href="/blog/assets/js/8.9eeabc0e.js"><link rel="prefetch" href="/blog/assets/js/9.42257256.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.96e0297f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">GXB</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/index.html" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/database/index.html" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/blog/docker/index.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/blog/other/index.html" class="nav-link">其他</a></li></ul></div></div> <a href="https://github.com/gongxb21/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/index.html" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/database/index.html" class="nav-link">数据库</a></li><li class="dropdown-item"><!----> <a href="/blog/docker/index.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/blog/other/index.html" class="nav-link">其他</a></li></ul></div></div> <a href="https://github.com/gongxb21/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
      GitHub
      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Jenkins 自动化中遇到的问题</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/docker/jenkins_summary.html#已解决" class="sidebar-link">已解决</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/docker/jenkins_summary.html#未解决" class="sidebar-link">未解决</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/docker/jenkins_summary.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content default"><h1 id="jenkins-自动化中遇到的问题"><a href="#jenkins-自动化中遇到的问题" aria-hidden="true" class="header-anchor">#</a> Jenkins 自动化中遇到的问题</h1> <h2 id="已解决"><a href="#已解决" aria-hidden="true" class="header-anchor">#</a> 已解决</h2> <ol><li><p><strong>【已解决】</strong> 关于配置构建后的邮件提醒，主要的坑有两个：</p> <ol><li>邮箱的密码，不是邮箱的登录密码，而是邮箱在申请 pop/smtp 服务之后，得到的一个授权码；</li> <li>邮箱必须要和 jenkins 的管理员邮箱一致。这个点真的困扰我很久，但是在搞定之后，好像一切又是那么的合情合理。</li></ol></li> <li><p><strong>【已解决】</strong> 在构建 maven 项目的时候，不支持 Java8 中的 lambda 表达式。</p> <p>这个点也困扰了我很久。一开始我以为是我没有在 Jenkins 中配置 jdk 的原因，我在 Jenkins 配置了各种 jdk 始终不能解决这个问题。后来，怀疑是代码的 pom 文件中没有添加编译的插件导致，我在 pom 后面添加了支持的 java8 的插件还是不可以。后来把编译插件的版本降了几个，<em>降了几个，降了几个</em> ，居然又可以了。编译插件如下：</p></li></ol> <div class="language-java(maven) line-numbers-mode"><pre class="language-text"><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.3.2&lt;/version&gt;
            &lt;configuration&gt;
                &lt;source&gt;1.8&lt;/source&gt;
                &lt;target&gt;1.8&lt;/target&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="3"><li><p><strong>【已解决】</strong> Jenkins 构建报错</p> <p><strong>/var/jenkins_home/workspace/test_test/src/test/java/com/sayyoo/auto/autotest/SubLetContractTest.java:[206,18] error: cannot find symbol</strong>
    通过对比发现是因为在这个类中使用了 Lombok 注解，导致 maven 编译报错，从而导致 mvn compiler 的时候报错。有两种方法结局：</p> <ol><li>不再使用@Getter 和@Setter 注解，通过 IDE 的快捷键生成相关的 getter 和 setter 方法；但是这个方法很愚蠢，因为 Lombok 的注解  就是为了开放方便。</li></ol> <p>2.（推荐）提高 maven-compiler-plugin 的版本</p></li></ol> <div class="language-java(maven) line-numbers-mode"><pre class="language-text"><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.7.0&lt;/version&gt;
            &lt;configuration&gt;
                &lt;source&gt;1.8&lt;/source&gt;
                &lt;target&gt;1.8&lt;/target&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="未解决"><a href="#未解决" aria-hidden="true" class="header-anchor">#</a> 未解决</h2> <ol start="4"><li><strong>【未解决】</strong> 运行在 Docker 中的 Jenkins，怎么配置测试报告，配置的路径始终找不到，会报 404 错误。</li></ol> <p>我觉这个问题其实也  不难解决，主要问题在于自己在 docker 运行 jenkins 的时候，没有挂载 docker 目录到宿主机上，导致自己设置的  目录是宿主机的目录 ，但是 jenkins 运行在 docker 中。所以注意在<a href="/blog/docker/jenkins.html">安装</a>的时候，就要把文件挂载好。</p> <ol start="5"><li><p><strong>【未解决】</strong> 为什么要用 Jenkins 执行自动化测试案例？</p> <p>我对 Jenkins 构建的理解是持续集成，持续交付。我觉得不应该用来做自动化测试，因为自动化测试的项目不需要打包。即使在 Jenkins 构建项目的时候，会执行测试用例也只是因为这是 maven 项目的特性，在执行 mvn  install 的时候，会自动执行 mvn test。正是因为 mvn test 这个命令才导致 Jenkins 去执行了我们的自动化测试。我觉得自己没有把 Jenkins 用在正途上，只是用了 Jenkins 的小功能，比如邮件提醒和可以配置的执行频率。</p></li></ol> <p>有了 Jenkins，可以不需要通过命令行手动去执行 mvn test 命令，可以对所有用例的执行结果和输出的日志有很好的展示。希望过几天再回头看的时候，会认为自己现在的想法是错误的。</p> <h2 id="参考"><a href="#参考" aria-hidden="true" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://blog.csdn.net/gxb2260/article/details/80934351" target="_blank" rel="noopener noreferrer">按不坏的 Ctrl 的博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="/blog/docker/jenkins_mail.html">配置通知邮件</a></li> <li><a href="/blog/docker/jenkins_setup.html">jenkins 配置</a></li> <li><a href="/blog/docker/jenkins.html">docker 安装 jenkins</a></li></ul></div> <!----> <!----> </div></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.7f3b1a20.js" defer></script><script src="/blog/assets/js/2.960483ae.js" defer></script><script src="/blog/assets/js/31.3c12a1d7.js" defer></script>
  </body>
</html>
